Implemente duas novas pÃ¡ginas no sistema APONTADOR com base nas especificaÃ§Ãµes abaixo. Preserve todas as funcionalidades estÃ¡veis e intervenha apenas nos pontos necessÃ¡rios, garantindo integridade e eficiÃªncia do sistema.

1ï¸âƒ£ PÃ¡gina: OcorrÃªncias/Transportes
Campos a serem criados:
obra_local_id â†’ vinculado Ã  tabela obra_locais
veiculo_id â†’ vinculado Ã  tabela veÃ­culos
motivo_paralizacao â†’ enum: manutenÃ§Ã£o preventiva, corretiva, quebra, abastecimento
tipo_manutencao â†’ enum: mecÃ¢nica, elÃ©trica, hidrÃ¡ulica, pneus, outros
descricao_manutencao â†’ texto livre
data_hora_inicio â†’ datetime
data_hora_retorno â†’ datetime
tempo_total â†’ calculado automaticamente: data_hora_retorno - data_hora_inicio
observacoes â†’ texto livre
usuario_id â†’ vinculado Ã  tabela usuarios
foto_anexo â†’ upload opcional
status â†’ enum: em andamento, concluÃ­do
indicador_preventiva â†’ boolean (true = preventiva, false = corretiva)

Nova tabela sugerida:
ocorrencias_transportes

sql
id (PK)
obra_local_id (FK)
veiculo_id (FK)
motivo_paralizacao
tipo_manutencao
descricao_manutencao
data_hora_inicio
data_hora_retorno
tempo_total
observacoes
usuario_id (FK)
foto_anexo
status
indicador_preventiva
created_at
updated_at

PermissÃµes:
Criar box de controle no painel de permissÃµes:
OcorrÃªncias/Transportes (visualizar_ocorrencias_transportes)


2ï¸âƒ£ PÃ¡gina: Clima Tempo
Campos a serem criados:
data_ocorrencia â†’ date
obra_local_id â†’ vinculado Ã  tabela obra_locais
tipo_chuva â†’ enum: fraca (verde), moderada (azul), forte (vermelha)
hora_inicio â†’ time
hora_fim â†’ time
tempo_total â†’ calculado automaticamente: hora_fim - hora_inicio
observacoes â†’ texto livre
usuario_id â†’ vinculado Ã  tabela usuarios

Nova tabela sugerida:
Clima_Tempo

sql
id (PK)
data_ocorrencia
obra_local_id (FK)
tipo_chuva
hora_inicio
hora_fim
tempo_total
observacoes
usuario_id (FK)
created_at
updated_at

Funcionalidades adicionais:
CalendÃ¡rio colorido por tipo de chuva
Totais mensais por tipo
BotÃµes de navegaÃ§Ã£o entre meses
ExportaÃ§Ã£o Excel/PDF

PermissÃµes:
Criar box de controle no painel de permissÃµes:
Clima Tempo (visualizar_Clima_Tempo)

ğŸ“Š RelatÃ³rios e Dashboards
RelatÃ³rio de ParalizaÃ§Ãµes:
Tempo total parado por veÃ­culo

Agrupamento por obra e tipo de manutenÃ§Ã£o
Filtro por perÃ­odo e status
RelatÃ³rio de Chuvas:
Totais mensais por tipo
GrÃ¡ficos de barras por intensidade
CalendÃ¡rio colorido com filtro por obra

Dashboard Integrado:
VeÃ­culos parados x motivo
Dias de chuva x intensidade
% de dias parados por manutenÃ§Ã£o
% de dias parados por clima

ğŸ”— IntegraÃ§Ãµes com banco de dados existente
obra_local_id â†’ vinculado Ã  obra_locais
veiculo_id â†’ vinculado Ã  veiculos
usuario_id â†’ vinculado Ã  usuarios
Todas as listas suspensas devem puxar dados diretamente das tabelas existentes para garantir consistÃªncia.

âœ… Regras de execuÃ§Ã£o
Execute apenas o necessÃ¡rio.
Preserve todas as funcionalidades estÃ¡veis.
Intervenha somente nos pontos que exigem correÃ§Ã£o ou melhoria.
Garanta que o sistema continue Ã­ntegro, estÃ¡vel e eficiente apÃ³s as aÃ§Ãµes.